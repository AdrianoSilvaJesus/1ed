https://hackernoon.com/tutorial-creating-and-managing-a-node-js-server-on-aws-part-2-5fbdea95f8a1

chmod 400 chave.pem

1) SSH
ssh -i livrows-nodekeypair.pem ec2-user@54.233.238.30

2) Update Yum

sudo yum update -y

3) Instalar o Node NVM (Node Version Manager)

https://github.com/creationix/nvm

// Download
curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.8/install.sh | bash

// Precisa reiniciar o bash ou fazer logout/login no ssh
source ~/.bashrc

// Instala a versão 9 do node
nvm install 9

// Verifica o que está instalado.
nvm ls

// Verifica a versão do node
node --version

4) Vamos copiar o projeto dos carros do livro.

// Instala o git
sudo yum install -y git

// Cria a pasta carros para baixar o projeto do github
mkdir carros
cd carros

// Baixa os fontes do github
git clone https://github.com/livronode/1ed

// Entra na pasta do projeto
cd 1ed/cap14-upload/

// Atualmente estamos nesta pasta
/home/ec2-user/carros/1ed/cap14-upload

// Baixar as dependências
npm install

// Executa o projeto
node app.js
---

ctrl+z
bg %1

---

instalar o nginx

##Amazon

sudo yum install -y nginx

sudo service nginx start

sudo chkconfig nginx on

cd /etc/nginx/
sudo vim nginx.conf

location / {
    proxy_set_header  X-Real-IP  $remote_addr;
    proxy_set_header  Host       $http_host;
    proxy_pass        http://127.0.0.1:3000;
}

--


sudo yum install -y mysql

wget https://raw.githubusercontent.com/livronode/1ed/master/backup_carros.sql

mysql -h livro.c6zmdwouvkyo.sa-east-1.rds.amazonaws.com -u livro -p livro < backup_carros.sql
--

--
manter no ar

Instala o npm

npm install pm2 -g

pm2 start arquivo.js

killall -9 node

npm i -g pm2

pm2 start app.js

pm2 startup
> digite o resultado

pm2 save

pm2 list
--
mongodb

https://docs.mongodb.com/manual/tutorial/install-mongodb-on-amazon/

sudo vim /etc/yum.repos.d/mongodb-org-3.6.repo

sudo yum install -y mongodb-org

sudo service mongod start
sudo chkconfig mongod on

sudo tail -f /var/log/mongodb/mongod.log

--